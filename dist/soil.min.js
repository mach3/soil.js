/*!
 *
 * Soil.js
 * http://mach3.github.com/soil.js
 *
 * - Library for class base programming with JavaScript
 *
 * @author mach3
 * @version 0.9.2.1
 * @require jQuery
 *
 */

var Soil=window.Soil||{};(function(e){e.extendMethod="plant",e.isObject=function(e){return Object.prototype.toString.call(e)==="[object Object]"},e.has=function(e,t){return t.hasOwnProperty(e)},e.rebase=function(e){return $.extend(!0,{},e)},e.render=function(e,t){return Mustache?Mustache.render(e,t):e.replace(/{{(.+?)}}/g,function(e,n){return t[n]||""})},e.extend=function(){var e,t,n,r;e=arguments,t=[].shift.call(e).prototype,$.isFunction(t)&&(t=t.prototype);for(r=0;r<e.length;r+=1)n=$.isFunction(e[r])?e[r].prototype:e[r],t=$.extend(!0,t,n);return t}})(Soil),Function.prototype.scope||(Function.prototype.scope=function(e){var t=this;return function(){return t.apply(e,arguments)}}),Function.prototype[Soil.extendMethod]||(Function.prototype[Soil.extendMethod]=function(){var e=arguments;[].unshift.call(e,this),Soil.extend.apply(Soil,e)}),Soil.Config=function(){},function(e){e.type="Config",e.option={},e._optionInit=!1,e.config=function(){var e,t,n,r,i;e=this,t=arguments,n=t[0],r=t[1],i=Soil.has(n,this.option),this._optionInit||(this.option=$.extend({},this.option),this._optionInit=!0);if(typeof n=="undefined")return this.option;if(Soil.isObject(n))return $.each(n,function(t,n){e.config(t,n)}),this;if(typeof r=="undefined")return i?this.option[n]:null;if(Soil.has(n,this.option))return this.option[n]=r,this}}(Soil.Config.prototype),Soil.Events=function(){},function(e){e.type="Events",e._events={},e._eventsInit=!1,e.hasEvent=function(e){return Soil.has(e,this._events)&&this._events[e].length>0},e.on=function(e,t){return this._eventsInit||(this._events=$.extend({},this._events),this._eventsInit=!0),this.hasEvent(e)||(this._events[e]=[]),this._events[e].push(t),this},e.off=function(e,t){return this.hasEvent(e)&&(this._events[e]=$.map(this._events[e],function(e){return t===e?null:e})),this},e.trigger=function(e){var t;if(this.hasEvent(e))for(t=0;t<this._events[e].length;t+=1)this._events[e][t].apply(this,[{type:e,target:this}]);return this}}(Soil.Events.prototype),Soil.Attributes=function(){},function(e){e.type="Attributes",e.attr={},e._attrInit=!1,e._attrLastChanged=null,e.set=function(){var e,t,n;return e=this,t=arguments,this._attrInit||(this.attr=$.extend({},this.attr),this._attrInit=!0),Soil.isObject(t[0])?$.each(t[0],function(t,n){e.set(t,n)}):Soil.has(t[0],this.attr)&&this.attr[t[0]]!=t[1]&&(this.attr[t[0]]=t[1],this._attrLastChanged=t[0],this.EVENT_CHANGE&&$.isFunction(this.trigger)&&this.trigger(this.EVENT_CHANGE)),this},e.get=function(e){return typeof e=="undefined"?this.attr:Soil.has(e,this.attr)?this.attr[e]:null}}(Soil.Attributes.prototype),Soil.Model=function(){},Soil.Model[Soil.extendMethod](Soil.Events,Soil.Attributes),function(e){e.type="Model",e.EVENT_CHANGE="change"}(Soil.Model.prototype),Soil.Stack=function(){},function(e){e._stack=[],e._stackIndex=0,e._stackInit=!1,e.add=function(){var e,t,n;e=this,t=arguments,this._stackInit||(this._stack=$.extend([],this._stack),this._stackInit=!0);for(n=0;n<t.length;n+=1)this._stack.push(t[n]);return this},e.fetch=function(e){return typeof e=="number"?this._stack[parseInt(e,10)]:this._stack},e.index=function(e){return typeof e=="number"?(e=parseInt(e,10),e>=0&&e<this._stack.length?(this._stackIndex=e,e):!1):this._stackIndex},e.rewind=function(){return this.index(0),this},e.next=function(){return this.index(this._stackIndex+1)},e.prev=function(){return this.index(this._stackIndex-1)},e.current=function(){return this.fetch(this._stackIndex)},e.each=function(e){return $.each(this._stack,e),this},e.remove=function(e){var t=[];return typeof e=="number"?(e=parseInt(e,10),this.each(function(n,r){e!==n&&t.push(r)}),this._stack=t):typeof e=="function"&&(this.each(function(n,r){e(r)||t.push(r)}),this._stack=t),this}}(Soil.Stack.prototype),Soil.View=function(){},Soil.View[Soil.extendMethod](Soil.Attributes),function(e){e._template=null,e.template=function(e){return typeof e=="string"?(this._template=e.toString(),this):this._template},e.render=function(e){return e=e||this.get(),Soil.render(this._template,e)}}(Soil.View.prototype);