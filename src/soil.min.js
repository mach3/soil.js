Function.prototype.scope||(Function.prototype.scope=function(e){var t=this;return function(){t.apply(e,arguments)}});var Soil=window.Soil||{};(function(){this.isObject=function(e){return Object.prototype.toString.call(e)==="[object Object]"},this.has=function(e,t){return t.hasOwnProperty(e)},this.rebase=function(e){return $.extend(!0,{},e)},this.render=function(e,t){return e.replace(/{{(.+?)}}/g,function(e,n){return t[n]||""})},this.extend=function(){var e,t,n,r;e=arguments,t=[].shift.call(e).prototype;for(r=0;r<e.length;r+=1)n=$.isFunction(e[r])?e[r].prototype:e[r],t=$.extend(!0,t,n)}}).call(Soil),Soil.Events=function(){},function(){this.type="Events",this._events={},this._eventsInit=!1,this.hasEvent=function(e){return Soil.has(e,this._events)&&this._events[e].length>0},this.on=function(e,t){return this._eventsInit||(this._events=$.extend({},this._events),this._eventsInit=!0),this.hasEvent(e)||(this._events[e]=[]),this._events[e].push(t),this},this.off=function(e,t){return this.hasEvent(e)&&(this._events[e]=$.map(this._events[e],function(e){return t===e?null:e})),this},this.trigger=function(e){var t;if(this.hasEvent(e))for(t=0;t<this._events[e].length;t+=1)this._events[e][t].apply(this,[{type:e,target:this}]);return this}}.call(Soil.Events.prototype),Soil.Config=function(){},function(){this.type="Config",this.option={},this._optionInit=!1,this.config=function(){var e,t,n,r,i;e=this,t=arguments,n=t[0],r=t[1],i=Soil.has(n,this.option),this._optionInit||(this.option=$.extend({},this.option),this._optionInit=!0);if(typeof n=="undefined")return this.option;if(Soil.isObject(n))return $.each(n,function(t,n){e.config(t,n)}),this;if(typeof r=="undefined")return i?this.option[n]:null;if(Soil.has(n,this.option))return this.option[n]=r,this}}.call(Soil.Config.prototype),Soil.Attributes=function(){},function(){this.type="Attributes",this.attr={},this._attrInit=!1,this._attrLastChanged=null,this.set=function(){var e,t,n;return e=this,t=arguments,this._attrInit||(this.attr=$.extend({},this.attr),this._attrInit=!0),Soil.isObject(t[0])?$.each(t[0],function(t,n){e.set(t,n)}):Soil.has(t[0],this.attr)&&this.attr[t[0]]!=t[1]&&(this.attr[t[0]]=t[1],this._attrLastChanged=t[0],this.EVENT_CHANGE&&$.isFunction(this.trigger)&&this.trigger(this.EVENT_CHANGE)),this},this.get=function(e){return typeof e=="undefined"?this.attr:Soil.has(e,this.attr)?this.attr[e]:null}}.call(Soil.Attributes.prototype),Soil.Model=function(){},Soil.extend(Soil.Model,Soil.Events,Soil.Attributes),function(){this.type="Model",this.EVENT_CHANGE="change"}.call(Soil.Model.prototype),Soil.Stack=function(){},function(){this._stack=[],this._stackIndex=0,this._stackInit=!1,this.add=function(){var e,t,n;e=this,t=arguments,this._stackInit||(this._stack=$.extend([],this._stack),this._stackInit=!0);for(n=0;n<t.length;n+=1)this._stack.push(t[n]);return this},this.fetch=function(e){return typeof e=="number"?this._stack[parseInt(e,10)]:this._stack},this.index=function(e){return typeof e=="number"?(e=parseInt(e,10),e>=0&&e<this._stack.length?(this._stackIndex=e,e):!1):this._stackIndex},this.rewind=function(){return this.index(0),this},this.next=function(){return this.index(this._stackIndex+1)},this.prev=function(){return this.index(this._stackIndex-1)},this.current=function(){return this.fetch(this._stackIndex)},this.each=function(e){return $.each(this._stack,e),this},this.remove=function(e){var t=[];return typeof e=="number"?(e=parseInt(e,10),this.each(function(n,r){e!==n&&t.push(r)}),this._stack=t):typeof e=="function"&&(this.each(function(n,r){e(r)||t.push(r)}),this._stack=t),this}}.call(Soil.Stack.prototype),Soil.View=function(){},Soil.extend(Soil.View,Soil.Attributes),function(){this._template=null,this.template=function(e){return typeof e=="string"?(this._template=e.toString(),this):this._template},this.render=function(e){return e=e||this.get(),Soil.render(this._template,e)}}.call(Soil.View.prototype);